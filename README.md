# dbus-controller-dummy
dummy controller for dbus-broker

Provides a way lo launch [dbus-broker] without the requirement of any specific
init system running. This means that dbus activation is disabled and service
dependencies must be taken care of explicitly in other ways.

Build the broker with `-Dlauncher=false`.

Controller+broker are a replacement for the original dbus-daemon
implementation, and are capable of running both system and session buses.

This is also a starting point to explore the feasibility of a runit/s6
controller.

## dbus-controller-s6rc

Build with `meson -Ds6-rc=enabled build`.

Usage: `dbus-controller-s6rc -h`.

The [s6-rc] controller looks in a s6-rc livedir for services containing the
file `data/dbus-activatable-name` with a dbus activatable name provided by the
service. It issues `s6-rc change <service>` when it receives an activation
request.

Such dbus activatable services can be autogenerated by `tools/s6rc-generator`,
which generates a s6-rc source database called `dbus` that can be included in
the list of your databases to compile with `s6-rc-compile`.

It is typically invoked as:
```
./s6rc-generator /usr/share/dbus-1/system-services/*
./s6rc-generator /usr/share/dbus-1/services/*
```
for the system and session bus, respectively.

You are free to further tweak this source database as you like, for example
removing unwanted activatable services.

[dbus-broker]: https://github.com/bus1/dbus-broker
[s6-rc]: https://skarnet.org/software/s6-rc
